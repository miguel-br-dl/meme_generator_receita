<div class="preview-shell" *ngIf="template as tpl; else emptyState">
  <article *ngIf="!isDescanseLayout(); else descanseLayout" #previewCard class="iphone" [style.background-image]="'url(' + tpl.assets.background + ')'">
    <div class="iphone-overlay" aria-hidden="true"></div>
    <div class="status-bar">
      <div>ðŸ“¶</div>
      <div class="battery">
        <span>{{ tpl.preview.battery }}</span>
        <div class="battery-icon">
          <div class="battery-level"></div>
          <div class="battery-tip" aria-hidden="true"></div>
        </div>
      </div>
    </div>

    <div class="time">
      <h1>{{ tpl.preview.time }}</h1>
      <span>{{ tpl.preview.subtitle }}</span>
    </div>

    <div class="notifications">
      <div class="notification" *ngFor="let slot of tpl.notifications">
        <div class="badge">
          <img [src]="tpl.assets.appIcon" alt="App" />
        </div>
        <div class="notification-content">
          <div class="notification-header">
            <strong>{{ resolve(slot.titleKey) }}</strong>
            <span class="notification-time">{{ slot.timeLabel || tpl.preview.notificationTime }}</span>
          </div>
          <div class="notification-text">{{ resolve(slot.textKey) }}</div>
        </div>
      </div>
    </div>
  </article>

  <ng-template #descanseLayout>
    <article #previewCard class="descanse-card" [style.background-image]="'url(' + tpl.assets.background + ')'">
      <svg class="descanse-top-arc" viewBox="0 0 1179 2096" aria-label="Texto superior curvado">
        <defs>
          <path id="descanseTopCurve" d="M 130 360 A 520 380 0 0 1 1049 360" />
        </defs>
        <text class="descanse-top-text">
          <textPath href="#descanseTopCurve" startOffset="50%" text-anchor="middle">
            {{ resolve('textoTopo') }}
          </textPath>
        </text>
      </svg>

      <div class="descanse-photo-frame">
        <img *ngIf="resolve('foto')" [src]="resolve('foto')" alt="Foto da pessoa do meme" />
        <div *ngIf="!resolve('foto')" class="descanse-photo-placeholder">Envie uma foto</div>
      </div>

      <p class="descanse-bottom">{{ resolve('textoRodape') }}</p>
    </article>
  </ng-template>
</div>

<ng-template #emptyState>
  <p class="empty-state">Selecione um template para prÃ©-visualizar.</p>
</ng-template>
